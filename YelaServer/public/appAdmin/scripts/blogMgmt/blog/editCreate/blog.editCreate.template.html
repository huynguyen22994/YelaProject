<div id="page-wrapper">
    <div class="row">
        <div class="col-lg-12">
            <div class="page-header">
                    <div class="row">
                        <div class="col-md-6">
                            <h3>Bài Viết Mới</h3>                 
                        </div>
                    </div>
            </div>
        </div>
        <!-- /.col-lg-12 -->
    </div>
    <div class="row">
            <form class="form-horizontal" name="form" novalidate>
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            Tạo mới bài viết
                        </div>
                        <div class="panel-body">
                            <div class="col-md-12 col-sm-12">
                                <div class="form-group has-success has-feedback">
                                    <label class="control-label col-sm-2" for="productname">*Tiêu Đề: </label>
                                    <div class="col-sm-10">
                                         <input class="form-control" ng-model="vm.Blog.title" id="productname" placeholder="Nhập tiêu đề" name="productname" required>  
                                        <span class="glyphicon glyphicon-ok form-control-feedback" ng-show="form.productname.$dirty && form.productname.$valid"></span>
                                        <span class="help-block" ng-messages="form.productname.$error" ng-if="form.productname.$dirty">
                                            <span ng-show="form.productname.$error.required" ng-message="required">không được bỏ trống.</span>
                                        </span>
                                    </div>
                                </div>

                                <div class="form-group has-success has-feedback">
                                    <label class="control-label col-sm-2" for="urlKey">*URL: </label>
                                    <div class="col-sm-10">
                                         <input class="form-control" ng-model="vm.Blog.urlKey" id="urlKey" placeholder="Nhập tiêu đề" name="urlKey" required>  
                                        <span class="glyphicon glyphicon-ok form-control-feedback" ng-show="form.urlKey.$dirty && form.urlKey.$valid"></span>
                                        <span class="help-block" ng-messages="form.urlKey.$error" ng-if="form.urlKey.$dirty">
                                            <span ng-show="form.urlKey.$error.required" ng-message="required">không được bỏ trống.</span>
                                        </span>
                                    </div>
                                </div>

                                <div class="form-group has-success has-feedback">
                                    <label class="control-label col-sm-2" for="productname">Tóm Tắt: </label>
                                    <div class="col-sm-10">
                                        <textarea class="form-control" ng-model="vm.Blog.summary" rows="4" placeholder="Nhập tóm tắt nội dung" id="summary" name="summary"></textarea> 
                                        <span class="glyphicon glyphicon-ok form-control-feedback" ng-show="form.summary.$dirty && form.summary.$valid"></span>
                                        <span class="help-block" ng-messages="form.summary.$error" ng-if="form.summary.$dirty">
                                            <span ng-show="form.summary.$error.required" ng-message="required">không được bỏ trống.</span>
                                        </span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <div class="form-group has-success has-feedback">
                                            <label class="control-label col-sm-4" for="artist">*Thể Loại </label>
                                            <div class="col-sm-8">          
                                                <select 
                                                    name="typeSelected" 
                                                    id="typeSelected" 
                                                    class="form-control" 
                                                    ng-options="option.name for option in vm.types track by option.id" 
                                                    ng-model="vm.typeObj" required>
                                                </select>
                                                <span class="glyphicon glyphicon-ok form-control-feedback" ng-show="form.typeSelected.$dirty && form.typeSelected.$valid"></span>
                                            </div>
                                        </div> 
                                    </div>

                                    <div class="col-sm-6">
                                        <div class="form-group has-success has-feedback">
                                            <div class="col-sm-4">          
                                                <div class="col-sm-12">
                                                    <button class="btn btn-info" ngf-select ng-model="picFile" accept="image/*">
                                                        Chọn Ảnh Bìa
                                                    </button>                                            
                                                    <span ng-if="picFile.name">{{picFile.name}}</span>
                                                    <span class="err" ng-show="errorMsg">{{errorMsg}}</span>
                                                </div>
                                            </div>
                                    
                                            <div class="col-sm-8" style="margin-top: 5px">
                                                <div class="col-sm-6">
                                                    <img ng-src="{{vm.croppedDataUrl}}" class="img-thumbnail" />
                                                </div>
                                                <div class="col-sm-6">
                                                    <div class="crop-image-class">
                                                        <span ngf-drop ng-model="picFile" ngf-pattern="image/*"
                                                            class="cropArea">
                                                            <img-crop image="picFile  | ngfDataUrl"                 
                                                            result-image="vm.croppedDataUrl">
                                                            </img-crop>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-sm-12">
                                        <div class="form-group has-success has-feedback">
                                            <label class="control-label col-sm-4" for="artist">Ảnh Blog Url </label>
                                            <div class="col-sm-8">          
                                                <input class="form-control" ng-model="vm.Blog.linkImg" id="imageUrl" placeholder="Nhập image url">  
                                            </div>
                                        </div> 
                                    </div>

                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-2" for="artist">Nội Dung: </label>
                                    <div class="col-sm-10">
                                        <div ckeditor="vm.options" ng-model="vm.Blog.description" ready="vm.onReady()"></div>
                                    </div>
                                </div>
                            </div> 
                        </div>
                        <div class="panel-footer">
                            <div class="form-group">        
                             <div class="col-sm-offset-2 col-sm-10">
                                <a class="btn btn-default pull-right" 
                                    ng-click="vm.cancel()"
                                    >
                                    <i class="fa fa-ban" aria-hidden="true"></i>
                                    <b>{{'Hủy' | i18next}}</b>
                                </a>
                                <button type="submit" ng-if="vm.isCreate()"
                                    ng-disabled="!form.$dirty || (form.$dirty && form.$invalid)" 
                                    class="btn btn-primary pull-right" 
                                    ng-click="vm.create(vm.croppedDataUrl, picFile.name)">
                                    <i class="fa fa-plus-circle" aria-hidden="true"></i>
                                    <b>{{'Tạo' | i18next}}</b>
                                </button>   
                                <button type="submit" ng-if="vm.isEdit()"
                                    ng-disabled="!form.$dirty || (form.$dirty && form.$invalid)" 
                                    class="btn btn-primary pull-right" 
                                    ng-click="vm.edit(vm.croppedDataUrl, picFile.name)">
                                    <i class="fa fa-plus-circle" aria-hidden="true"></i>
                                    <b>{{'Lưu' | i18next}}</b>
                                </button>          
                            </div> 
                            </div>
                        </div>
                    </div>
                </form>
    </div>
</div>